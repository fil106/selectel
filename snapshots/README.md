## Скрипт для создания и управления снапшотами томов в OpenStack

Этот скрипт предназначен для автоматизации создания и управления снапшотами томов в OpenStack. Он позволяет создавать снапшоты томов, у которых задан определенный ключ метаданных, а также удалять старые снапшоты на основе заданного периода.

### Предварительные требования

- Установленная утилита командной строки OpenStack CLI. Если она не установлена, пожалуйста, обратитесь к инструкциям по установке, специфичным для вашего менеджера пакетов системы.

### Использование

1. Убедитесь, что вы установили OpenStack RC-FILE, указав путь к файлу в переменной `rcFile` в начале скрипта.
2. Задайте желаемый период хранения бэкапов в днях, изменив переменную `retentionDays`.
3. При необходимости установите переменные region и zone в соответствии с вашей средой OpenStack. По умолчанию скрипт использует переменную окружения `OS_REGION_NAME` для указания региона и устанавливает зону в "a".
4. Добавьте property в сетевой диск который хотим бэкапить
```bash
openstack volume set --property autoSnapshot=true <volume uuid>
```
5. Запустите скрипт с помощью следующей команды:
```bash
bash autosnapshot.sh "path to rc.sh file"
```
- Если аргумент rcFile не указан, скрипт будет использовать путь по умолчанию, указанный в скрипте `${PWD}/rc.sh`.
- Скрипт создаст файл журнала с именем snapshots_creating.log в текущем каталоге для сохранения логов выполнения.

### Пример использования

```bash
Copy code
./script.sh /путь/к/openstack/rc-файлу
```

В этом примере скрипт выполняется с использованием RC-файла OpenStack, расположенного по пути /путь/к/openstack/rc-файлу. Он будет создавать снапшоты для томов, у которых ключ метаданных autoSnapshot установлен в true. Снапшоты будут создаваться с описанием, содержащим текущую дату и имя тома. Если существуют старые снапшоты, превышающие указанный период хранения, они будут удалены.

Убедитесь, что у вас есть необходимые разрешения и настроены правильные учетные данные в предоставленном RC-файле OpenStack, чтобы скрипт имел доступ к управлению томами и снапшотами в вашей среде OpenStack.
